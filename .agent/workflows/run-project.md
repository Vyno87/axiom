---
description: How to run the Axiom Attendance System (Next.js + ESP32)
---

### 1. Backend Setup (Next.js)

1.  **Configure Environment**:
    - Open `.env.local`
    - Fill in your `MONGODB_URI` (from MongoDB Atlas or local MongoDB).
    - Ensure `API_KEY` is present (autogenerated during setup).

2.  **Install Dependencies**:
    ```powershell
    npm install
    ```

3.  **Run Development Server**:
    ```powershell
    npm run dev
    ```
    - The app will be available at `http://localhost:3000`.

4.  **Seed Database (First Time Only)**:
    - Visit `http://localhost:3000/api/seed` in your browser.
    - This creates a test employee (uid: 1) so the fingerprint scan has a match to link to.

---

### 2. Firmware Setup (ESP32)

1.  **Open Firmware Folder**:
    - Open the `firmware` folder in VS Code. Make sure you have the **PlatformIO** extension installed.

2.  **Configure Hardware**:
    - Open `firmware/src/main.cpp`.
    - Update `WIFI_SSID` and `WIFI_PASSWORD`.
    - Update `API_KEY` (copy the value from your backend `.env.local`).
    - If running locally, you might need to change `API_URL` to your local IP (e.g., `http://192.168.1.5:3000/api/ingest`). Note: ESP32 requires a reachable URL.

3.  **Upload to ESP32**:
    - Connect your ESP32 DevKit V1.
    - Click the **PlatformIO: Upload** button (arrow icon) in the bottom status bar or run:
      ```powershell
      pio run -t upload
      ```

4.  **Monitor Output**:
    - Click the **PlatformIO: Serial Monitor** button (plug icon) or run:
      ```powershell
      pio device monitor
      ```

---

### 3. Usage

1.  **Dashboard**: Open `http://localhost:3000` to see the live feed.
2.  **Check-in**:
    - On ESP32, select "Check-in" using the buttons.
    - Place the registered finger on the AS608 sensor.
    - View the "Success" screen and watch the Dashboard update in real-time.
3.  **Verification**: Visit `/api/verify-chain` to check if your ledger is still secure.
